<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI智教</title>
    <link rel="stylesheet" href="css/styles.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --guide-color: #3498db;
            --self-color: #2ecc71;
            --matrix-color: #e67e22;
            --resource-color: #9b59b6;
            --agent-color: #e74c3c;
            --grading-color: #f39c12;
            --video-color: #5a19ff;
            --music-color: #16a085;
            --course-color: #ff8dea;
        }

        body {
            font-family: '微软雅黑', Arial, sans-serif;
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
            background: #ececec;
            transition: all 0.3s;
        }

        /* 新功能按钮 */
        .feature-buttons {
            display: flex;
            gap: 15px;
            margin: 20px 0;
            justify-content: center;
            flex-wrap: wrap;
        }

        .feature-btn {
            padding: 12px 25px;
            border-radius: 25px;
            border: none;
            cursor: pointer;
            transition: all 0.3s;
            color: white;
            box-shadow: 0 3px 6px rgba(0,0,0,0.1);
            font-weight: bold;
        }

        .challenge-btn { background: var(--matrix-color); }
        .matrix-btn { background: var(--guide-color); }
        .resource-btn { background: var(--resource-color); }
        .agent-btn { background: var(--agent-color); }
        .grading-btn { background: var(--grading-color); }
        .video-btn { background: var(--video-color); }
        .music-btn { background: var(--music-color); }
        .course-btn { background: var(--course-color); }

        .feature-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }

        /* 功能模块 */
        .module-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 25px;
            margin: 40px 0;
        }

        .module-card {
            background: white;
            border-radius: 15px;
            padding: 25px;
            cursor: pointer;
            transition: transform 0.2s;
            position: relative;
            overflow: hidden;
            box-shadow: 0 3px 10px rgba(0,0,0,0.1);
        }

        .module-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 20px rgba(0,0,0,0.15);
        }

        .module-card::after {
            content: "点击查看";
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            background: rgba(0,0,0,0.7);
            color: white;
            text-align: center;
            padding: 8px;
            opacity: 0;
            transition: opacity 0.3s;
        }

        .module-card:hover::after {
            opacity: 1;
        }

        /* 方言搜索 */
        .search-box {
            position: relative;
            display: flex;
            align-items: center;
            width: 100%;
            max-width: 500px;
            margin: 20px auto;
            background: white;
            border-radius: 30px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
            overflow: hidden;
        }

        #searchInput {
            flex: 1;
            padding: 12px 20px;
            border: none;
            outline: none;
            font-size: 16px;
            background: transparent;
        }

        .search-icons {
            display: flex;
            align-items: center;
            padding-right: 10px;
        }

        .voice-btn, .search-btn {
            background: none;
            border: none;
            cursor: pointer;
            font-size: 18px;
            padding: 8px;
            margin: 0 2px;
            border-radius: 50%;
            transition: background 0.3s;
        }

        .voice-btn:hover, .search-btn:hover {
            background: rgba(0, 0, 0, 0.05);
        }

        /* 内容区域 */
        .content-section {
            display: none;
            background: white;
            border-radius: 15px;
            padding: 25px;
            margin: 20px 0;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }

        /* 文本布局 */
        .media-layout {
            display: flex;
            gap: 30px;
            margin-top: 20px;
        }

        .text-content {
            flex: 1;
            line-height: 1.6;
        }

        /* 视频布局 */
        .video-content {
            flex: 1;
            background: #f8f9fa;
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            min-height: 300px;
        }

        .video-placeholder {
            text-align: center;
            color: #666;
        }

        /* 图片布局 */
        .image-gallery {
            flex: 1;
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 15px;
        }

        .gallery-image {
            width: 100%;
            height: auto;
            border-radius: 8px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }

        /* 模态窗口 */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.7);
            z-index: 1000;
            align-items: center;
            justify-content: center;
        }

        .modal-content {
            background: white;
            padding: 30px;
            border-radius: 15px;
            max-width: 600px;
            width: 90%;
            max-height: 80vh;
            overflow-y: auto;
        }

        /* 能力矩阵 */
        .matrix-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .matrix-item {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 10px;
        }

        /* 资源工厂 */
        .resource-form {
            display: grid;
            gap: 15px;
            margin-top: 20px;
        } 

        .form-group {
            display: flex;
            flex-direction: column;
        }

        .form-group label {
            margin-bottom: 8px;
            font-weight: bold;
        }

        .form-group input, .form-group select, .form-group textarea {
            padding: 10px;
            border-radius: 8px;
            border: 1px solid #ddd;
        }

        /*AI融入课堂*/
        .ai-course{
            display:grid;
            gap:15px;
            margin-top:20px;
        }

        .ai-item{
            background: white;
            padding:20px;
            border-radius:8px;
        }

        /* 成长挑战 */
        .challenge-list {
            display: grid;
            gap: 15px;
            margin-top: 20px;
        }

        .challenge-item {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 10px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .progress-bar {
            height: 10px;
            background: #e0e0e0;
            border-radius: 5px;
            margin-top: 10px;
            overflow: hidden;
        }

        .progress {
            height: 100%;
            background: var(--self-color);
            border-radius: 5px;
            transition: width 0.5s;
        }

        /* AI聊天界面样式 */
        .ai-chat-container {
            display: none;
            position: fixed;
            right: 20px;
            bottom: 20px;
            width: 350px;
            height: 500px;
            background: white;
            border-radius: 12px;
            box-shadow: 0 5px 25px rgba(0, 0, 0, 0.2);
            z-index: 1000;
            flex-direction: column;
            overflow: hidden;
        }
        
        .ai-chat-header {
            background: #4b6cb7;
            color: white;
            padding: 15px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .ai-chat-header h3 {
            margin: 0;
            font-size: 1.2rem;
        }
        
        .close-chat {
            cursor: pointer;
            font-size: 1.5rem;
        }
        
        .ai-chat-messages {
            flex: 1;
            padding: 15px;
            overflow-y: auto;
            background: #f9f9f9;
        }
        
        .message {
            margin-bottom: 15px;
            max-width: 80%;
        }
        
        .user-message {
            margin-left: auto;
        }
        
        .user-message p {
            background: #4b6cb7;
            color: white;
            padding: 10px 15px;
            border-radius: 18px 18px 5px 18px;
        }
        
        .ai-message p {
            background: #e6e6e6;
            color: #333;
            padding: 10px 15px;
            border-radius: 18px 18px 18px 5px;
        }
        
        .ai-chat-input {
            display: flex;
            padding: 15px;
            border-top: 1px solid #ddd;
            background: white;
        }
        
        .ai-chat-input input {
            flex: 1;
            padding: 10px 15px;
            border: 1px solid #ddd;
            border-radius: 20px;
            outline: none;
        }
        
        .ai-chat-input button {
            margin-left: 10px;
            background: #4b6cb7;
            color: white;
            border: none;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            cursor: pointer;
        }
        
        .loading {
            opacity: 0.7;
            font-style: italic;
        }

        .main-title {
        text-align: center;
        margin: 30px 0;
        }
        
        .main-title h1 {
            font-size: 80px;
            font-weight: bold;
            background: linear-gradient(135deg, #000000, #000000);
            background-clip: text;
            -webkit-background-clip: text;
            color: transparent;
            -webkit-text-fill-color: transparent;
        }

        /* 响应式设计 */
        @media (max-width: 768px) {
            .media-layout {
                flex-direction: column;
            }
            
            .feature-buttons {
                flex-direction: column;
                align-items: center;
            }
            
            .feature-btn {
                width: 100%;
                max-width: 300px;
            }
        }
    </style>
</head>
<body>
    <div class="main-title">
        <h1>AI智教</h1>
    </div>

    <!-- AI聊天界面 -->
        <div class="ai-chat-container" id="aiChatContainer">
            <div class="ai-chat-header">
                <h3>AI智能助手</h3>
                <span class="close-chat" id="closeChat" onclick="closeAIChat()">&times;</span>
            </div>
            <div class="ai-chat-messages" id="chatMessages">
                <div class="message ai-message">
                    <p>您好！我是您的AI助手，有什么可以帮您的吗？</p>
                </div>
            </div>
            <div class="ai-chat-input">
                <input type="text" id="userInput" placeholder="输入您的问题...">
                <button id="sendMessage" onclick="sendUserMessage()"><i class="fas fa-paper-plane"></i></button>
            </div>
        </div>
    </div>

    <!-- 方言搜索 -->
    <div class="search-box">
    <input type="text" id="searchInput" placeholder="点击麦克风说话或输入关键词...">
        <div class="search-icons">
            <button class="voice-btn" onclick="startVoiceRecognition()">🎤</button>
            <button class="search-btn" onclick="openAIChat()">🔍</button>
        </div>
    </div>

    <!-- 新功能按钮 -->
    <div class="feature-buttons">
        <button class="feature-btn challenge-btn" onclick="showSection('challengeSystem')">成长挑战系统</button>
        <button class="feature-btn matrix-btn" onclick="showSection('matrixManual')">AI能力矩阵手册</button>
        <button class="feature-btn resource-btn" onclick="showSection('resourceFactory')">资源工厂</button>
        <button class="feature-btn agent-btn" onclick="showSection('textToImage')">文生图</button>
        <button class="feature-btn grading-btn" onclick="showSection('creativeWriting')">AI创意写作</button>
        <button class="feature-btn video-btn" onclick="showSection('documentOrganization')">AI文档整理</button>
        <button class="feature-btn music-btn" onclick="showSection('mindMapping')">AI思维导图</button>
        <button class="feature-btn course-btn" onclick="showSection('AiCourse')">AI融入课堂</button>
    </div>

    <!-- 核心功能模块 -->
    <div class="module-grid">
        <div class="module-card" data-module="createAgent" onclick="showSection('createAgent')">
            <h3>🤖创建智能体</h3>
            <p>搭建口语教学智能交互体</p>
        </div>
        <div class="module-card" data-module="aiGrading" onclick="showSection('aiGrading')">
            <h3>📚AI批改作业</h3>
            <p>智能批改英语作业</p>
        </div>
        <div class="module-card" data-module="textToMusic" onclick="showSection('textToMusic')">
            <h3>🎵文生音乐</h3>
            <p>依据文意生成相关音乐</p>
        </div>
        <div class="module-card" data-module="textToVideo" onclick="showSection('textToVideo')">
            <h3>📹文生视频</h3>
            <p>依据文意生成动态演示视频</p>
        </div>
    </div>

    <!-- 文生图页面 -->
    <div id="textToImage" class="content-section">
        <h2>🎨 文生图</h2>
        <div class="media-layout">
            <div class="text-content">
                <p>需要用到的平台有：（点击文字即可跳转）</p>
                <p><a href="https://www.doubao.com/chat/" target="_blank">豆包</a></p>
                <p><a href="https://www.midjourney.com/" target="_blank">Midjourney</a></p>
                
                <ol>
                    <li>打开豆包或Midjourney平台</li>
                    <li>在输入框中描述您想要生成的图像内容</li>
                    <li>选择图像风格、尺寸和数量</li>
                    <li>点击生成按钮，等待AI创建图像</li>
                    <li>对生成的图像进行调整或重新生成</li>
                    <li>下载满意的图像结果</li>
                </ol>
                
                <h4>有用资源：</h4>
                <ul>
                    <li><a href="#" onclick="alert('即将跳转到提示词指南')">文生图提示词指南</a></li>
                    <li><a href="#" onclick="alert('即将跳转到风格参考')">艺术风格参考库</a></li>
                    <li><a href="#" onclick="alert('即将跳转到案例展示')">优秀案例展示</a></li>
                </ul>
            </div>
            <div class="video-content">
                <div class="video-player">
                    <video id="textToImageVideo" controls width="600" height="520">
                        <source src="/uploads/text_to_image_tutorial.mp4" type="video/mp4">
                        您的浏览器不支持HTML5视频播放
                    </video>
                    <div class="video-controls">
                        <button onclick="playVideo('textToImageVideo')">播放</button>
                        <button onclick="pauseVideo('textToImageVideo')">暂停</button>
                        <button onclick="toggleFullscreen('textToImageVideo')">全屏</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- AI创意写作页面 -->
    <div id="creativeWriting" class="content-section">
        <h2>✍️ AI创意写作</h2>
        <div class="media-layout">
            <div class="text-content">
                <p>需要用到的平台有：（点击文字即可跳转）</p>
                <p><a href="https://www.doubao.com/chat/" target="_blank">豆包</a></p>
                <p><a href="https://chat.openai.com/" target="_blank">ChatGPT</a></li>
                
                <ol>
                    <li>选择适合的AI写作平台</li>
                    <li>输入写作主题或关键词</li>
                    <li>选择写作风格（故事、诗歌、散文等）</li>
                    <li>设置文章长度和语言风格</li>
                    <li>生成初稿并进行润色修改</li>
                    <li>导出最终作品</li>
                </ol>
                
                <h4>有用资源：</h4>
                <ul>
                    <li><a href="#" onclick="alert('即将跳转到写作技巧')">AI写作技巧指南</a></li>
                    <li><a href="#" onclick="alert('即将跳转到风格模板')">写作风格模板库</a></li>
                    <li><a href="#" onclick="alert('即将跳转到案例库')">优秀作品案例</a></li>
                </ul>
            </div>
            <div class="video-content">
                <div class="video-player">
                    <video id="creativeWritingVideo" controls width="600" height="520">
                        <source src="/uploads/creative_writing_tutorial.mp4" type="video/mp4">
                        您的浏览器不支持HTML5视频播放
                    </video>
                    <div class="video-controls">
                        <button onclick="playVideo('creativeWritingVideo')">播放</button>
                        <button onclick="pauseVideo('creativeWritingVideo')">暂停</button>
                        <button onclick="toggleFullscreen('creativeWritingVideo')">全屏</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- AI文档整理页面 -->
    <div id="documentOrganization" class="content-section">
        <h2>📄 AI文档整理</h2>
        <div class="media-layout">
            <div class="text-content">
                <p>需要用到的平台有：（点击文字即可跳转）</p>
                <p><a href="https://www.doubao.com/chat/" target="_blank">豆包</a></p>
                <p><a href="https://www.notion.so/" target="_blank">Notion AI</a></p>
                
                <ol>
                    <li>上传需要整理的文档或输入文本内容</li>
                    <li>选择整理模式（摘要、重组、格式化等）</li>
                    <li>设置输出格式和结构要求</li>
                    <li>生成整理后的文档</li>
                    <li>检查并调整整理结果</li>
                    <li>导出最终文档</li>
                </ol>
                
                <h4>有用资源：</h4>
                <ul>
                    <li><a href="#" onclick="alert('即将跳转到使用技巧')">文档整理技巧</a></li>
                    <li><a href="#" onclick="alert('即将跳转到模板库')">文档模板库</a></li>
                    <li><a href="#" onclick="alert('即将跳转到案例展示')">整理案例展示</a></li>
                </ul>
            </div>
            <div class="video-content">
                <div class="video-player">
                    <video id="documentOrganizationVideo" controls width="600" height="520">
                        <source src="/uploads/document_organization_tutorial.mp4" type="video/mp4">
                        您的浏览器不支持HTML5视频播放
                    </video>
                    <div class="video-controls">
                        <button onclick="playVideo('documentOrganizationVideo')">播放</button>
                        <button onclick="pauseVideo('documentOrganizationVideo')">暂停</button>
                        <button onclick="toggleFullscreen('documentOrganizationVideo')">全屏</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- AI思维导图页面 -->
    <div id="mindMapping" class="content-section">
        <h2>🧠 AI思维导图</h2>
        <div class="media-layout">
            <div class="text-content">
                <p>需要用到的平台有：（点击文字即可跳转）</p>
                <p><a href="https://www.doubao.com/chat/" target="_blank">豆包</a></p>
                <p><a href="https://www.xmind.ai/" target="_blank">XMind AI</a></p>
                
                <ol>
                    <li>输入中心主题或核心概念</li>
                    <li>AI自动生成相关分支和子主题</li>
                    <li>手动调整分支结构和关联关系</li>
                    <li>添加图标、颜色和样式增强可视化</li>
                    <li>导出思维导图或分享给他人</li>
                </ol>
                
                <h4>有用资源：</h4>
                <ul>
                    <li><a href="#" onclick="alert('即将跳转到使用指南')">思维导图制作指南</a></li>
                    <li><a href="#" onclick="alert('即将跳转到模板库')">思维导图模板</a></li>
                    <li><a href="#" onclick="alert('即将跳转到案例库')">优秀思维导图案例</a></li>
                </ul>
            </div>
            <div class="video-content">
                <div class="video-player">
                    <video id="mindMappingVideo" controls width="600" height="520">
                        <source src="/uploads/mind_mapping_tutorial.mp4" type="video/mp4">
                        您的浏览器不支持HTML5视频播放
                    </video>
                    <div class="video-controls">
                        <button onclick="playVideo('mindMappingVideo')">播放</button>
                        <button onclick="pauseVideo('mindMappingVideo')">暂停</button>
                        <button onclick="toggleFullscreen('mindMappingVideo')">全屏</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- 成长挑战系统 -->
    <div id="challengeSystem" class="content-section">
        <h2>🏆 成长挑战系统</h2>
        <p>完成以下挑战，提升您的AI应用技能：</p>
        
        <div class="challenge-list">
            <div class="challenge-item">
                <div>
                    <h4>新手入门：创建第一个AI作品</h4>
                    <p>使用任意工具创建一个完整的AI生成作品</p>
                    <div class="progress-bar">
                        <div class="progress" style="width: 30%"></div>
                    </div>
                </div>
                <button class="feature-btn" style="padding: 8px 15px;" onclick="startChallenge(1)">开始挑战</button>
            </div>
            
            <div class="challenge-item">
                <div>
                    <h4>进阶任务：掌握多模态生成</h4>
                    <p>结合文本、图像和音频创建多媒体内容</p>
                    <div class="progress-bar">
                        <div class="progress" style="width: 10%"></div>
                    </div>
                </div>
                <button class="feature-btn" style="padding: 8px 15px;" onclick="showComingSoon(2)">开始挑战</button>
            </div>
            
            <div class="challenge-item">
                <div>
                    <h4>专家挑战：自定义AI工作流</h4>
                    <p>设计并实现一个完整的AI辅助工作流程</p>
                    <div class="progress-bar">
                        <div class="progress" style="width: 5%"></div>
                    </div>
                </div>
                <button class="feature-btn" style="padding: 8px 15px;" onclick="showComingSoon(3)">开始挑战</button>
            </div>
        </div>

        <!-- 第一关内容 -->
        <div id="challenge1Content" style="display: none; margin-top: 30px;">
            <h3>第一关：创建第一个AI作品</h3>
            <p>在这个挑战中，您将学习如何使用AI工具创建您的第一个作品。</p>
            
            <div class="challenge-steps">
                <h4>任务步骤：</h4>
                <ol>
                    <li>选择一个AI工具（文生图、文生视频等）</li>
                    <li>按照教程创建一个简单的作品</li>
                    <li>提交您的作品截图或链接</li>
                    <li>获得反馈并完成挑战</li>
                </ol>
            </div>
            
            <div class="challenge-submission">
                <h4>提交您的作品：</h4>
                <textarea id="submissionText" placeholder="请描述您的作品或提供链接..." rows="4" style="width: 100%; padding: 10px; border-radius: 8px; border: 1px solid #ddd; margin-bottom: 10px;"></textarea>
                <input type="file" id="submissionFile" accept="image/*" style="margin-bottom: 10px;">
                <button class="feature-btn" onclick="submitChallenge(1)">提交作品</button>
            </div>
        </div>
    </div>

    <!-- AI能力矩阵手册 -->
    <div id="matrixManual" class="content-section">
        <h2>📊 AI能力矩阵手册</h2>
        <p>了解不同AI工具的能力评级和使用场景：</p>
        
        <div class="matrix-grid">
            <div class="matrix-item">
                <h4>文生图工具</h4>
                <p><strong>豆包:</strong> ⭐⭐⭐⭐☆ (4/5) - 图像质量高，风格多样</p>
                <p><strong>即梦:</strong> ⭐⭐⭐☆☆ (3/5) - 响应快速，适合简单生成</p>
                <p><strong>Midjourney:</strong> ⭐⭐⭐⭐⭐ (5/5) - 专业级图像生成，细节丰富</p>
            </div>
            
                        <div class="matrix-item">
                <h4>文生视频工具</h4>
                <p><strong>创视:</strong> ⭐⭐⭐⭐☆ (4/5) - 场景过渡自然，分镜合理</p>
                <p><strong>动影:</strong> ⭐⭐⭐☆☆ (3/5) - 基础功能完善，适合初学者</p>
                <p><strong>RunwayML:</strong> ⭐⭐⭐⭐⭐ (5/5) - 专业级视频生成，效果出色</p>
            </div>
            
            <div class="matrix-item">
                <h4>文生音乐工具</h4>
                <p><strong>韵音:</strong> ⭐⭐⭐⭐☆ (4/5) - 情感表达丰富，风格多样</p>
                <p><strong>乐创:</strong> ⭐⭐⭐☆☆ (3/5) - 节奏感强，适合背景音乐</p>
                <p><strong>AIVA:</strong> ⭐⭐⭐⭐⭐ (5/5) - 专业音乐生成，支持多种风格</p>
            </div>

            <div class="matrix-item">
                <h4>AI写作工具</h4>
                <p><strong>豆包写作:</strong> ⭐⭐⭐⭐☆ (4/5) - 中文写作优化，适合各类文体</p>
                <p><strong>ChatGPT:</strong> ⭐⭐⭐⭐⭐ (5/5) - 多语言支持，创意丰富</p>
                <p><strong>Claude:</strong> ⭐⭐⭐⭐☆ (4/5) - 长文本处理优秀，逻辑清晰</p>
            </div>

            <div class="matrix-item">
                <h4>AI文档整理</h4>
                <p><strong>Notion AI:</strong> ⭐⭐⭐⭐☆ (4/5) - 与Notion完美集成，功能全面</p>
                <p><strong>豆包文档:</strong> ⭐⭐⭐☆☆ (3/5) - 基础整理功能，适合简单需求</p>
                <p><strong>Mem.ai:</strong> ⭐⭐⭐⭐☆ (4/5) - 智能关联，知识管理强大</p>
            </div>

            <div class="matrix-item">
                <h4>思维导图工具</h4>
                <p><strong>XMind AI:</strong> ⭐⭐⭐⭐☆ (4/5) - 智能生成结构，可视化优秀</p>
                <p><strong>MindMeister:</strong> ⭐⭐⭐☆☆ (3/5) - 协作功能强大，适合团队</p>
                <p><strong>Whimsical:</strong> ⭐⭐⭐⭐☆ (4/5) - 界面简洁，易于使用</p>
            </div>
        </div>

        <div class="tip-box" style="margin-top: 30px;">
            <h4>💡 使用建议：</h4>
            <p>根据您的具体需求选择合适的工具。初学者可以从评分3星的工具开始，熟练后再尝试更专业的4-5星工具。</p>
            <p>多数工具提供免费试用版本，建议先试用再决定是否购买高级版本。</p>
        </div>
    </div>

    <!-- 资源工厂 -->
    <div id="resourceFactory" class="content-section">
        <h2>🏭 资源工厂</h2>
        <p>根据您的需求生成个性化教学资源：</p>
        
        <div class="resource-form">
            <div class="form-group">
                <label for="resourceType">资源类型</label>
                <select id="resourceType">
                    <option value="lessonPlan">教案设计</option>
                    <option value="worksheet">学习工作纸</option>
                    <option value="activity">课堂活动</option>
                    <option value="assessment">评估材料</option>
                </select>
            </div>
            
            <div class="form-group">
                <label for="gradeLevel">年级</label>
                <select id="gradeLevel">
                    <option value="primary">小学</option>
                    <option value="junior">初中</option>
                    <option value="senior">高中</option>
                    <option value="university">大学</option>
                </select>
            </div>
            
            <div class="form-group">
                <label for="subject">学科</label>
                <input type="text" id="subject" placeholder="例如：数学、语文、英语...">
            </div>
            
            <div class="form-group">
                <label for="topic">主题</label>
                <input type="text" id="topic" placeholder="例如：二次函数、古诗词鉴赏...">
            </div>
            
            <button class="feature-btn" onclick="generateResource()">生成资源</button>
        </div>
        
        <div id="resourceOutput" style="margin-top: 30px; display: none;">
            <h3>生成的资源</h3>
            <div class="generated-resource">
                <!-- 生成的内容将在这里显示 -->
            </div>
        </div>

        <div class="tip-box" style="margin-top: 30px;">
            <h4>💡 使用技巧：</h4>
            <p>1. 尽可能详细地描述您需要的资源主题，AI会根据描述生成更精准的内容</p>
            <p>2. 生成后您可以进一步编辑和调整资源内容，使其完全符合您的需求</p>
            <p>3. 常用的资源可以保存为模板，下次直接调用修改</p>
        </div>
    </div>

    <!--AI融入课堂主菜单-->
    <div id="AiCourse" class="content-section">
        <h2>👏 AI融入课堂</h2>
        <p>选择您想要了解的教学模式：</p>
        
        <div class="module-grid">
            <div class="module-card" onclick="showImageGallery('文字微镜头')">
                <h3>📝 文字微镜头</h3>
                <p>文字教学的AI创新应用</p>
            </div>
            <div class="module-card" onclick="showImageGallery('AI出题')">
                <h3>📕 AI出题</h3>
                <p>图像与视觉辅助教学</p>
            </div>
            <div class="module-card" onclick="showImageGallery('拓展知识')">
                <h3>🔄 拓展知识</h3>
                <p>师生互动的AI增强模式</p>
            </div>
            <div class="module-card" onclick="showImageGallery('布置作业')">
                <h3>📊 布置作业</h3>
                <p>AI辅助的学习评估</p>
            </div>
        </div>
    </div>

    <!-- 图片轮播模态框 -->
    <div id="imageGalleryModal" class="modal">
        <div class="modal-content" style="max-width: 800px;">
            <h2 id="galleryTitle"></h2>
            <div class="gallery-container" style="position: relative; text-align: center;">
                <button class="gallery-nav" onclick="prevImage()" style="position: absolute; left: 10px; top: 50%; transform: translateY(-50%); background: rgba(0,0,0,0.5); color: white; border: none; border-radius: 50%; width: 40px; height: 40px; font-size: 20px; cursor: pointer;">❮</button>
                
                <img id="galleryImage" src="" alt="" style="max-width: 100%; max-height: 500px; border-radius: 10px;">
                
                <button class="gallery-nav" onclick="nextImage()" style="position: absolute; right: 10px; top: 50%; transform: translateY(-50%); background: rgba(0,0,0,0.5); color: white; border: none; border-radius: 50%; width: 40px; height: 40px; font-size: 20px; cursor: pointer;">❯</button>
                
                <div style="margin-top: 15px;">
                    <span id="imageCounter"></span>
                </div>
            </div>
            <button onclick="closeModal()" style="margin-top: 20px; padding: 10px 20px; background: var(--course-color); color: white; border: none; border-radius: 5px; cursor: pointer;">关闭</button>
        </div>
    </div>

    <!-- 创建智能体 -->
    <div id="createAgent" class="content-section">
        <h2>🤖 创建智能体</h2>
        <div class="media-layout">
            <div class="text-content">
                <p>需要用到的平台有：（点击文字即可跳转）</p>
                <p><a href="https://www.doubao.com/chat/" target="_blank">豆包</a></p>
                
                <ol>
                    <li>打开豆包APP首页，在下栏选择点击智能体，点击创建AI智能体</li>
                    <li>对智能体进行设定
                        <ul>
                            <li>名称、形象、设定描述、声音、语言以及是否公开</li>
                            <li>选择"更多高级设定"：设置介绍和开场白</li>
                        </ul>
                    </li>
                    <li>完成设定描述后可以点击右上角的"一键完善"，完善介绍和开场白，完善后点击下方的"创建智能体"</li>
                </ol>
                
                <h4>有用资源：</h4>
                <ul>
                    <li><a href="#" onclick="alert('即将跳转到数据集资源页面')">公开数据集资源库</a></li>
                    <li><a href="#" onclick="alert('即将跳转到模型训练教程')">模型训练详细教程</a></li>
                    <li><a href="#" onclick="alert('即将跳转到部署指南')">智能体部署指南</a></li>
                    <li><a href="#" onclick="alert('即将跳转到案例研究')">成功案例研究</a></li>
                </ul>
                
                <div class="tip-box">
                    <h4>💡 专业提示：</h4>
                    <p>从小型项目开始，逐步迭代改进。确保您的训练数据具有代表性和多样性，以避免模型偏见。</p>
                </div>
            </div>
            <div class="video-content">
                <div class="video-player">
                    <video id="agentVideo" controls width="600" height="520">
                        <source src="/uploads/agent_tutorial.mp4" type="video/mp4">
                        您的浏览器不支持HTML5视频播放
                    </video>
                    <div class="video-controls">
                        <button onclick="playVideo('agentVideo')">播放</button>
                        <button onclick="pauseVideo('agentVideo')">暂停</button>
                        <button onclick="toggleFullscreen('agentVideo')">全屏</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- AI批改作业 -->
    <div id="aiGrading" class="content-section">
        <h2>📝 AI批改作业</h2>
        <div class="media-layout">
            <div class="text-content">
                <p>需要用到的平台有：（点击文字即可跳转）</p>
                <p><a href="https://www.pigaibang.com/" target="_blank">批改邦</a></p>
                <ol>
                    <li>点击"作文批改"上传学生作文</li>
                    <li>可选择默认标准或题目自拟</li>
                    <li>提交批改完后点击下方"点击查看"，可查看旁批、分数、详细点评、改进建议、原文对比</li>
                </ol>
                
                <h4>相关资源：</h4>
                <ul>
                    <li><a href="#" onclick="alert('即将跳转到作业批改标准')">作业批改标准与规范</a></li>
                    <li><a href="#" onclick="alert('即将跳转到API文档')">批改API接口文档</a></li>
                    <li><a href="#" onclick="alert('即将跳转到最佳实践')">AI批改最佳实践</a></li>
                    <li><a href="#" onclick="alert('即将跳转到案例库')">成功应用案例</a></li>
                </ul>
            </div>
            <div class="video-content">
                <div class="video-player">
                    <video id="gradingVideo" controls width="600" height="520">
                        <source src="/uploads/grading_tutorial.mp4" type="video/mp4">
                        您的浏览器不支持HTML5视频播放
                    </video>
                    <div class="video-controls">
                        <button onclick="playVideo('gradingVideo')">播放</button>
                        <button onclick="pauseVideo('gradingVideo')">暂停</button>
                        <button onclick="toggleFullscreen('gradingVideo')">全屏</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- 文生视频 -->
    <div id="textToVideo" class="content-section">
        <h2>🎥 文生视频</h2>
        <div class="media-layout">
            <div class="text-content">
                <p>需要用到的平台有：（点击文字即可跳转）</p>
                <p><a href="https://www.doubao.com/chat/" target="_blank">豆包</a></p>
                <p><a href="https://jimeng.jianying.com/" target="_blank">即梦AI</a></p>
                <p><a href="https://jimeng.jianying.com/" target="_blank">剪映</a></p>
                <ol>
                    <li>打开豆包，点击图像生成</li>
                    <li>上传课本人物图片，点击方框中的"风格"键，图片风格选择"3D渲染"，可以加入一些人物形象描述，生成的形象更接近课本人物</li>
                    <li>渲染完成后，点击方框中的下载键，保存，同样步骤生成其他课本人物的3D形象</li>
                    <li>打开"即梦AI"，点击"灵感"，点击"数字人"</li>
                    <li>点击方框里的两个图标，分别上传3D人物图片与音频</li>
                    <li>在文本朗读的框内输入课本对话原文，音色可根据人物特征选择，女孩则用"小女孩"，男孩则用"小男孩"</li>
                    <li>浏览视频后，点击方框中的下载键，即可保存。按照同样步骤，依次生成其他课本人物的说话视频</li>
                    <li>打开"剪映"，点击"素材"，之后点击"导入"，导入所有3D人物静态图像，3D人物说话视频以及校园背景（校园背景可使用浏览器搜索保存），按所需顺序拖入下方时间轴轨道(当一个人物在说话时，另一个人物只需在时间轴上导入静态图片），接着在轨道上调整各素材的位置，精准对齐，搭建起视频的基础剪辑框架 ，为后续添加抠像操作做准备</li>
                    <li>在剪映操作界面，先选中需处理头像的图片并点击画面区域，接着点击"自定义抠像"，选择"智能画笔"，使用蓝色画笔沿人物轮廓描绘一笔，软件自动识别并抠取人物边缘，最后点击"应用效果"</li>
                    <li>完成人物头像的抠取及效果应用</li>
                    <li>按照前述操作流程，选取更多人物素材，依次拖入时间轴轨道，重复"点击画面 - 自定义抠像 - 智能画笔描绘抠像 - 应用效果"步骤，将处理好的人物素材有序排列，完成多人物的导入、头像抠取及布局排版</li>
                    <li>添加字幕时，先点击"字幕"，选择"字幕模板"，随机选一个模板，点击右侧"文本"按键，在文本框填入对应对话，点击"保存预设" ，按此流程为不同场景添加字幕</li>
                    <li>点击方框中的"导出"键，即可保存视频</li>
                </ol>
                
                <h4>学习资源：</h4>
                <ul>
                    <li><a href="#" onclick="alert('即将跳转到提示词指南')">视频生成提示词指南</a></li>
                    <li><a href="#" onclick="alert('即将跳转到风格手册')">视觉风格参考手册</a></li>
                    <li><a href="#" onclick="alert('即将跳转到高级技巧')">高级视频生成技巧</a></li>
                    <li><a href="#" onclick="alert('即将跳转到案例展示')">优秀案例展示</a></li>
                </ul>
            </div>
            <div class="video-content">
                <div class="video-player">
                    <video id="textToVideoVideo" controls width="600" height="520">
                        <source src="/uploads/text_to_video_tutorial.mp4" type="video/mp4">
                        您的浏览器不支持HTML5视频播放
                    </video>
                    <div class="video-controls">
                        <button onclick="playVideo('textToVideoVideo')">播放</button>
                        <button onclick="pauseVideo('textToVideoVideo')">暂停</button>
                        <button onclick="toggleFullscreen('textToVideoVideo')">全屏</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- 文生音乐 -->
    <div id="textToMusic" class="content-section">
        <h2>🎵 文生音乐</h2>
        <div class="media-layout">
            <div class="text-content">
                <p>需要用到的平台有：（点击文字即可跳转）</p>
                <p><a href="https://www.doubao.com/chat/" target="_blank">豆包</a></p>
                <p><a href="https://www.kimi.com/" target="_blank">Kimi</a></p>
                <p><a href="https://www.musichero-mobile.com/" target="_blank">Music Hero</a></p>
                <ol>
                    <li>利用豆包提取单元句子、主题、单词</li>
                    <li>借助Kimi，依据设定的词汇、主题、句子及难度要求，生成符合条件的英文歌曲歌词</li>
                    <li>将歌词导入Music Hero，再选伴奏类型、标题等生成音乐</li>
                </ol>
                
                <h4>学习材料：</h4>
                <ul>
                    <li><a href="#" onclick="alert('即将跳转到音乐理论')">AI音乐生成理论基础</a></li>
                    <li><a href="#" onclick="alert('即将跳转到提示词库')">音乐描述提示词库</a></li>
                    <li><a href="#" onclick="alert('即将跳转到高级设置')">高级参数调整指南</a></li>
                    <li><a href="#" onclick="alert('即将跳转到作品集')">生成音乐作品集</a></li>
                </ul>
            </div>
            <div class="video-content">
                <div class="video-player">
                    <video id="textToMusicVideo" controls width="600" height="520">
                        <source src="/uploads/text_to_music_tutorial.mp4" type="video/mp4">
                        您的浏览器不支持HTML5视频播放
                    </video>
                    <div class="video-controls">
                        <button onclick="playVideo('textToMusicVideo')">播放</button>
                        <button onclick="pauseVideo('textToMusicVideo')">暂停</button>
                        <button onclick="toggleFullscreen('textToMusicVideo')">全屏</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- 说明弹窗 -->
    <div id="guideModal" class="modal">
        <div class="modal-content">
            <h2 id="modalTitle"></h2>
            <div id="modalContent"></div>
            <button onclick="closeModal()" style="margin-top: 20px; padding: 10px 20px; background: var(--guide-color); color: white; border: none; border-radius: 5px; cursor: pointer;">关闭</button>
        </div>
    </div>

    <!-- 即将上线提示弹窗 -->
    <div id="comingSoonModal" class="modal">
        <div class="modal-content">
            <h2>敬请期待</h2>
            <p>该功能正在紧张开发中，即将上线，请持续关注！</p>
            <button onclick="closeModal()" style="margin-top: 20px; padding: 10px 20px; background: var(--guide-color); color: white; border: none; border-radius: 5px; cursor: pointer;">关闭</button>
        </div>
    </div>

    <script>
        // 显示/隐藏内容区域
        function showSection(sectionId) {
            // 隐藏所有内容区域
            document.querySelectorAll('.content-section').forEach(section => {
                section.style.display = 'none';
            });
            
            // 显示选中的内容区域
            document.getElementById(sectionId).style.display = 'block';
            
            // 如果是特殊页面，加载相应内容
            if (['createAgent', 'aiGrading', 'textToVideo', 'textToMusic'].includes(sectionId)) {
                loadSpecialContent(sectionId);
            }
        }

        // 加载特殊页面内容
        function loadSpecialContent(sectionId) {
            console.log(`加载 ${sectionId} 的特定内容`);
            // 这里可以添加API调用或其他内容加载逻辑
        }

        // 方言语音识别
        function startVoiceRecognition() {
            if (!("webkitSpeechRecognition" in window)) {
                alert("您的浏览器不支持语音识别");
                return;
            }

            const recognition = new webkitSpeechRecognition();
            recognition.lang = "zh-CN";
            recognition.continuous = false;
            
            recognition.onresult = (event) => {
                const transcript = event.results[0][0].transcript;
                handleDialectInput(transcript);
            };
            
            recognition.start();
        }

        // 方言处理
        const dialectMap = {
            "整图": "文生图",
            "搞段视频": "文生视频",
            "整首歌": "文生音乐",
            "脑图": "思维导图",
            "帮手": "AI助手",
            "改作业": "批改作业",
            "整视频": "文生视频",
            "整音乐": "文生音乐"
        };

        function handleDialectInput(text) {
            // 替换方言关键词
            Object.keys(dialectMap).forEach(dialect => {
                const regex = new RegExp(dialect, 'g');
                text = text.replace(regex, dialectMap[dialect]);
            });
            document.getElementById("searchInput").value = text;
            searchContent(text);
        }

        // 打开AI聊天界面
        function openAIChat() {
            document.getElementById('aiChatContainer').style.display = 'flex';
        }
        
        // 关闭AI聊天界面
        function closeAIChat() {
            document.getElementById('aiChatContainer').style.display = 'none';
        }
        
        // 发送用户消息
        function sendUserMessage() {
            const userInput = document.getElementById('userInput');
            const message = userInput.value.trim();
            
            if (message) {
                addUserMessage(message);
                userInput.value = '';
                
                // 模拟AI回复（实际应用中应调用API）
                setTimeout(() => {
                    simulateAIResponse(message);
                }, 1000);
            }
        }
        
        // 添加用户消息到聊天界面
        function addUserMessage(message) {
            const chatMessages = document.getElementById('chatMessages');
            const messageDiv = document.createElement('div');
            messageDiv.className = 'message user-message';
            messageDiv.innerHTML = `<p>${message}</p>`;
            chatMessages.appendChild(messageDiv);
            chatMessages.scrollTop = chatMessages.scrollHeight;
        }
        
        // 添加AI消息到聊天界面
        function addAIMessage(message) {
            const chatMessages = document.getElementById('chatMessages');
            const messageDiv = document.createElement('div');
            messageDiv.className = 'message ai-message';
            messageDiv.innerHTML = `<p>${message}</p>`;
            chatMessages.appendChild(messageDiv);
            chatMessages.scrollTop = chatMessages.scrollHeight;
        }
        
        // 模拟AI回复
        function simulateAIResponse(userMessage) {
            // 显示加载状态
            const chatMessages = document.getElementById('chatMessages');
            const loadingDiv = document.createElement('div');
            loadingDiv.className = 'message ai-message loading';
            loadingDiv.innerHTML = '<p>思考中...</p>';
            chatMessages.appendChild(loadingDiv);
            chatMessages.scrollTop = chatMessages.scrollHeight;
            
            // 模拟API延迟
            setTimeout(() => {
                // 移除加载状态
                document.querySelector('.loading').remove();
                
                // 根据用户消息生成回复
                let response;
                if (userMessage.includes('风格') || userMessage.includes('艺术')) {
                    response = "我们支持多种艺术风格转换，包括水墨、油画、像素艺术等。您可以选择一张图片，然后选择喜欢的风格进行转换。";
                } else if (userMessage.includes('视频') || userMessage.includes('文本')) {
                    response = "文本视频功能可以将您的文字描述转换为视频内容，自动进行分镜和场景过渡。请提供您的文本内容，我会帮您生成视频脚本。";
                } else if (userMessage.includes('音乐') || userMessage.includes('音频')) {
                    response = "文生音乐功能可以根据文本内容生成匹配情感的音乐。您可以描述想要的音乐类型或情感，我会为您生成相应的音乐。";
                } else if (userMessage.includes('思维导图') || userMessage.includes('图谱')) {
                    response = "AI思维导图功能可以智能分析内容并生成结构化的知识图谱。请提供核心主题，我会为您创建思维导图。";
                } else if (userMessage.includes('资源') || userMessage.includes('教学')) {
                    response = "资源工厂可以根据您的需求生成个性化教学资源。请告诉我您需要的学科、年级和资源类型，我会为您定制资源。";
                } else {
                    response = "感谢您的提问！我是AI智教的AI助手，可以帮助您了解我们的图片风格转换、文本视频、文生音乐、AI思维导图和教学资源生成等功能。请告诉我您需要什么帮助？";
                }
                
                addAIMessage(response);
            }, 1500);
        }
        
        // 按回车发送消息
        document.getElementById('userInput').addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                sendUserMessage();
            }
        });

        // 搜索功能
        function searchContent(keyword) {
            console.log("搜索关键词:", keyword);
            // 实际搜索逻辑实现
            alert(`正在搜索: ${keyword}`);
        }

        // 生成资源
        function generateResource() {
            const type = document.getElementById('resourceType').value;
            const grade = document.getElementById('gradeLevel').value;
            const subject = document.getElementById('subject').value;
            const topic = document.getElementById('topic').value;
            
            if (!subject || !topic) {
                alert('请填写学科和主题信息');
                return;
            }
            
            // 模拟资源生成
            const output = document.getElementById('resourceOutput');
            output.style.display = 'block';
            
            const resourceContent = `
                <h4>${getResourceTypeName(type)} - ${subject} - ${topic}</h4>
                <p>适合年级: ${getGradeName(grade)}</p>
                <div style="background: #f0f8ff; padding: 15px; border-radius: 8px; margin-top: 15px;">
                    <p>您请求的资源正在生成中...</p>
                    <p>AI正在为您创建适合${getGradeName(grade)}${subject}课程的${getResourceTypeName(type)}，主题为"${topic}"。</p>
                    <p>这通常需要几秒钟时间，请稍候。</p>
                </div>
            `;
            
            output.querySelector('.generated-resource').innerHTML = resourceContent;
            
            // 模拟生成延迟
            setTimeout(() => {
                output.querySelector('.generated-resource').innerHTML = `
                    <h4>${getResourceTypeName(type)} - ${subject} - ${topic}</h4>
                    <p>适合年级: ${getGradeName(grade)}</p>
                    <div style="background: #f0f8ff; padding: 15px; border-radius: 8px; margin-top: 15px;">
                        <h5>资源生成完成！</h5>
                        <p>您的${getResourceTypeName(type)}已准备就绪，包含：</p>
                        <ul>
                            <li>3个主要学习目标</li>
                            <li>5个教学活动建议</li>
                            <li>2个评估方法</li>
                            <li>扩展学习资源链接</li>
                        </ul>
                        <button class="feature-btn" style="padding: 8px 15px;">下载资源包</button>
                    </div>
                `;
            }, 2000);
        }

        function getResourceTypeName(type) {
            const types = {
                'lessonPlan': '教案设计',
                'worksheet': '学习工作纸',
                'activity': '课堂活动',
                'assessment': '评估材料'
            };
            return types[type] || '教学资源';
        }

        function getGradeName(grade) {
            const grades = {
                'primary': '小学',
                'junior': '初中',
                'senior': '高中',
                'university': '大学'
            };
            return grades[grade] || '所有年级';
        }

        // 视频控制函数
        function playVideo(videoId) {
            const video = document.getElementById(videoId);
            if (video) {
                video.play().catch(error => {
                    console.error('播放失败:', error);
                    alert('视频播放失败，请检查文件路径');
                });
            }
        }

        function pauseVideo(videoId) {
            const video = document.getElementById(videoId);
            if (video) {
                video.pause();
            }
        }

        function toggleFullscreen(videoId) {
            const video = document.getElementById(videoId);
            if (video) {
                if (video.requestFullscreen) {
                    video.requestFullscreen();
                } else if (video.webkitRequestFullscreen) {
                    video.webkitRequestFullscreen();
                } else if (video.msRequestFullscreen) {
                    video.msRequestFullscreen();
                }
            }
        }

        // 挑战系统函数
        function startChallenge(challengeId) {
            if (challengeId === 1) {
                document.getElementById('challenge1Content').style.display = 'block';
            } else {
                showComingSoon(challengeId);
            }
        }

        function showComingSoon(challengeId) {
            document.getElementById('comingSoonModal').style.display = 'flex';
        }

        function submitChallenge(challengeId) {
            const submissionText = document.getElementById('submissionText').value;
            const submissionFile = document.getElementById('submissionFile').files[0];
            
            if (!submissionText && !submissionFile) {
                alert('请提交作品描述或文件');
                return;
            }
            
            alert('作品提交成功！即将为您审核...');
            // 模拟审核过程
            setTimeout(() => {
                alert('恭喜您完成第一关挑战！获得30积分');
                document.querySelector('.challenge-item:nth-child(1) .progress').style.width = '100%';
            }, 2000);
        }

        function closeModal() {
            document.querySelectorAll('.modal').forEach(modal => {
                modal.style.display = 'none';
            });
        }

        // 点击模态框外部关闭
        window.onclick = function(event) {
            document.querySelectorAll('.modal').forEach(modal => {
                if (event.target === modal) {
                    modal.style.display = 'none';
                }
            });
        };

        // DeepSeek API集成框架
        async function callDeepSeekAPI(message) {
            // 注意：在实际部署时，API密钥应该存储在服务器端，而不是前端代码中
            const apiKey = "sk-2b635ee59bd24096b50ccb08e22c32a4";
            const apiUrl = "https://api.deepseek.com/v1/chat/completions";
            
            try {
                const response = await fetch(apiUrl, {
                    method: "POST",
                    headers: {
                        "Content-Type": "application/json",
                        "Authorization": `Bearer ${apiKey}`
                    },
                    body: JSON.stringify({
                        model: "deepseek-chat",
                        messages: [
                            {
                                role: "system",
                                content: "你是一个有帮助的AI助手，专门帮助教师和教育工作者使用AI工具进行教学。"
                            },
                            {
                                role: "user",
                                content: message
                            }
                        ],
                        temperature: 0.7,
                        max_tokens: 1000
                    })
                });
                
                if (!response.ok) {
                    throw new Error(`API请求失败: ${response.status}`);
                }
                
                const data = await response.json();
                return data.choices[0].message.content;
            } catch (error) {
                console.error("调用DeepSeek API出错:", error);
                // 返回模拟响应作为备用
                return "抱歉，我现在无法访问AI服务。这是一个模拟响应：请问我关于AI教学工具的问题，我会尽力帮助您！";
            }
        }

        // 初始化页面
        document.addEventListener('DOMContentLoaded', function() {
            // 初始化视频错误处理
            const videos = document.querySelectorAll('video');
            videos.forEach(video => {
                video.addEventListener('error', function() {
                    console.error('视频加载失败:', video.src);
                    const videoContainer = video.parentElement;
                    if (videoContainer) {
                        videoContainer.innerHTML = `
                            <div class="video-fallback">
                                <div style="font-size: 48px; margin-bottom: 15px;">❌</div>
                                <h3>视频加载失败</h3>
                                <p>请确保视频文件位于 uploads/ 文件夹中</p>
                                <p>支持的格式: MP4, WebM, OGG</p>
                                <button onclick="location.reload()">重新加载</button>
                            </div>
                        `;
                    }
                });
                
                video.addEventListener('loadeddata', function() {
                    console.log('视频加载成功:', video.src);
                });
            });

            console.log('AI智教应用初始化完成');
        });

        // 图片轮播相关变量
        let currentGallery = '';
        let currentImageIndex = 0;
        const galleryImages = {
            '文字微镜头': [
                'uploads/AICOURSE1.jpg',
                'uploads/AICOURSE2.jpg',
                'uploads/AICOURSE3.jpg',
                'uploads/AICOURSE4.jpg',
                'uploads/AICOURSE5.jpg',
                'uploads/AICOURSE6.jpg',
                'uploads/AICOURSE7.jpg',
                'uploads/AICOURSE8.jpg',
                'uploads/AICOURSE9.jpg'
            ],
            'AI出题': [
                'uploads/QUESTION1.png',
                'uploads/QUESTION2.png',
                'uploads/QUESTION3.png',
                'uploads/QUESTION4.png'
            ],
            '拓展知识': [
                'uploads/KNOWLEDGE1.png',
                'uploads/KNOWLEDGE2.png',
                'uploads/KNOWLEDGE3.png'
            ],
            '布置作业': [
                'uploads/HOMEWORK1.png',
                'uploads/HOMEWORK2.png',
                'uploads/HOMEWORK3.png'
            ]
        };

        // 显示图片轮播
        function showImageGallery(galleryName) {
            currentGallery = galleryName;
            currentImageIndex = 0;
            
            document.getElementById('galleryTitle').textContent = galleryName;
            document.getElementById('imageGalleryModal').style.display = 'flex';
            
            showCurrentImage();
        }

        // 显示当前图片
        function showCurrentImage() {
            const images = galleryImages[currentGallery];
            if (images && images.length > 0) {
                document.getElementById('galleryImage').src = images[currentImageIndex];
                document.getElementById('imageCounter').textContent = `${currentImageIndex + 1} / ${images.length}`;
            }
        }

        // 上一张图片
        function prevImage() {
            const images = galleryImages[currentGallery];
            if (images && images.length > 0) {
                currentImageIndex = (currentImageIndex - 1 + images.length) % images.length;
                showCurrentImage();
            }
        }

        // 下一张图片
        function nextImage() {
            const images = galleryImages[currentGallery];
            if (images && images.length > 0) {
                currentImageIndex = (currentImageIndex + 1) % images.length;
                showCurrentImage();
            }
        }
    </script>
</body>
</html>